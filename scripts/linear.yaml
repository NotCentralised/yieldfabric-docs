commands:
  # START FUNDING COUNTERPART
  # - name: issuer_deposit
  #   type: deposit
  #   user: 
  #     id: issuer@yieldfabric.com
  #     password: issuer_password
  #   parameters:
  #     asset_id: aud-token-asset
  #     amount: 1000
  #     idempotency_key: deposit-$(date +%s)

  # - name: issuer_send_1
  #   type: instant
  #   user: 
  #     id: issuer@yieldfabric.com
  #     password: issuer_password
  #   parameters:
  #     asset_id: aud-token-asset
  #     amount: 100
  #     idempotency_key: instant-$(date +%s)
  #     destination_id: collateral@yieldfabric.com

  # - name: counterpart_accept_1
  #   type: accept
  #   user: 
  #     id: collateral@yieldfabric.com
  #     password: collateral_password
  #   parameters:
  #     idempotency_key: accept-$(date +%s)
  #     payment_id: $issuer_send_1.payment_id


  # START CREATING ANNUITY

  - name: issuer_annuity_stream_obligation_1
    type: create_obligation
    user: 
      id: issuer@yieldfabric.com
      password: issuer_password
    parameters:
      idempotency_key: create_annuity_stream_obligation-ergonomic-$(date +%s)
      counterpart: collateral@yieldfabric.com
      denomination: aud-token-asset
      obligor: collateral@yieldfabric.com
      notional: 100000000
      expiry: 2025-11-04
      data: 
        name: "Annuity Stream"
        description: "Annuity Stream Obligation"
      initial_payments:
        amount: 100000000
        payments:
          - id: payment-1
            linear_vesting: true
            payer:
              unlock: 2025-11-05
            payee:
              unlock: 2025-11-05

  - name: issuer_accept_annuity_stream_obligation_1
    type: accept_obligation
    user: 
      id: collateral@yieldfabric.com
      password: collateral_password
    parameters:
      idempotency_key: accept_annuity_stream_obligation-ergonomic-$(date +%s)
      contract_id: $issuer_annuity_stream_obligation_1.contract_id




  - name: issuer_deposit
    type: deposit
    user: 
      id: issuer@yieldfabric.com
      password: issuer_password
    parameters:
      asset_id: aud-token-asset
      amount: 1000
      idempotency_key: deposit-$(date +%s)




  - name: counterpart_accept_1
    type: accept
    user: 
      id: issuer@yieldfabric.com
      password: issuer_password
    parameters:
      idempotency_key: accept-$(date +%s)
      payment_id: PAY-INITIAL-$issuer_annuity_stream_obligation_1.contract_id-0



  - name: issuer_send_1
    type: instant
    user: 
      id: issuer@yieldfabric.com
      password: issuer_password
    parameters:
      asset_id: aud-token-asset
      amount: 100
      idempotency_key: instant-$(date +%s)
      destination_id: collateral@yieldfabric.com

  - name: counterpart_accept_1
    type: accept
    user: 
      id: collateral@yieldfabric.com
      password: collateral_password
    parameters:
      idempotency_key: accept-$(date +%s)
      payment_id: $issuer_send_1.payment_id



  - name: counterpart_accept_2
    type: accept
    user: 
      id: issuer@yieldfabric.com
      password: issuer_password
    parameters:
      idempotency_key: accept-$(date +%s)
      payment_id: PAY-INITIAL-$issuer_annuity_stream_obligation_1.contract_id-0


    